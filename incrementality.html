<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Incrementality Playground</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 20px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    textarea { width: 100%; height: 160px; }
    pre { background:#111; color:#ddd; padding:10px; overflow:auto; }
    .btn { padding:8px 12px; border:1px solid #ccc; background:#f5f5f5; cursor:pointer; }
  </style>
</head>
<body>
  <h1>Incrementality Sandbox</h1>
  <p>Simulate two regions (A/B), apply synthetic spend and observe difference-in-differences on your on-site events.</p>
  <div class="row">
    <button id="generate" class="btn">Generate synthetic data</button>
    <button id="analyze" class="btn">Analyze DiD</button>
  </div>
  <h3>Results</h3>
  <pre id="out"></pre>
  <script>
    (function(){
      var out = document.getElementById('out');
      var data = [];
      function gen(){
        data = []; var baseA=100, baseB=100, uplift=0.2; // 20% uplift in region A after intervention
        for (var t=0;t<30;t++){
          var post = t>=15; var a = baseA + (post? baseA*uplift:0) + Math.random()*10; var b = baseB + Math.random()*10; data.push({ day:t, A:a, B:b, post:post });
        }
        out.textContent = JSON.stringify(data.slice(0,10), null, 2)+'\n...';
      }
      function did(){
        if (!data.length) { out.textContent = 'Generate first'; return; }
        var preA = data.filter(function(r){return !r.post;}).reduce(function(s,r){return s+r.A;},0)/15;
        var preB = data.filter(function(r){return !r.post;}).reduce(function(s,r){return s+r.B;},0)/15;
        var postA = data.filter(function(r){return r.post;}).reduce(function(s,r){return s+r.A;},0)/15;
        var postB = data.filter(function(r){return r.post;}).reduce(function(s,r){return s+r.B;},0)/15;
        var uplift = (postA-preA) - (postB-preB);
        out.textContent = 'DiD uplift â‰ˆ '+uplift.toFixed(2);
      }
      document.getElementById('generate').addEventListener('click', gen);
      document.getElementById('analyze').addEventListener('click', did);
    })();
  </script>
</body>
</html>

